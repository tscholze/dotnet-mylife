@page "/opensource"
@using MyLife.Blazor.Wasm.Components.OpenSource
@using MyLife.Core
@using MyLife.Core.Models
@using MyLife.Core.Services
@inject LifeService lifeService

<div class="opensource">
    <h2>Open source activities</h2>

    @if (Data != null)
    {
        <h3>My motivation</h3>
        <p>@Data.Motivation</p>

        <h3>Some projects</h3>
        @foreach (var family in Data.ProjectFamilies)
        {
            <ProjectFamilySection Family="family" />
        }
    }
</div>

@code {
    #region Private member

    /// <summary>
    /// Contains the open source activities data for display on the page.
    /// </summary>
    private Core.Models.OpenSource.Container? Data;

    #endregion

    #region Init

    /// <summary>
    /// Initializes the page by loading open source data from the life service.
    /// </summary>
    /// <returns>A task representing the asynchronous operation.</returns>
    protected override async Task OnInitializedAsync()
    {
        var life = await lifeService.GetLife();
        Data = life?.OpenSource;
    }

    #endregion

    #region UI builder

    #endregion
}